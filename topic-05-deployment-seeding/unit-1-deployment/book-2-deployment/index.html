<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/combine/npm/highlightjs@9.16.2,npm/jquery@3.4.1"></script>
    <script src="https://cdn.jsdelivr.net/combine/npm/highlightjs@9.16.2,npm/jquery@3.4.1,npm/jquery-address@1.6.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js"></script>
    <link href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/railscasts.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <style>
      

body {
  font-family: "Open Sans", "Helvetica", "Helvetica Neue",  "Arial", sans-serif;
  font-size:90%;
  color: black;
}

p {
  margin: 0.5em;
}

pre code {
  font-family: "Monaco";
  font-size: 100%;
}

img {
  box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
  margin:10px;
}

h1, h2, h3 {
  border-bottom:thin solid black;
  margin-bottom: 0.5em;
  margin-top: 1em;
}

h1 {
  font-style:italic;
  font-size:130%;
}

h2 {
  font-size:110%;
}

h3 {
  font-size:100%;
}



      

html, body {
  height: 100%;
  margin: 0;
}
.wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.footer {
  background: white;
  text-align: right;
}
.content {
  flex: 1;
  overflow: auto;
}



    </style>
  </head>

  
  

  <div class="ui fixed top pointing inverted stackable menu labmenu">
    <header class="header item">
      <i id="toc" class="sitemap icon"></i>
      
        <a href="../../index.html"> Versioning & Deployment  </a>
      
    </header>
    <div class="right tab-menu menu">
      
        <a class="item" data-tab="Lab 05b Deployment">
          Lab 05b Deployment
        </a>
      
        <a class="item" data-tab="Solutions">
          Solutions
        </a>
      
        <a class="item" data-tab="02">
          02
        </a>
      
        <a class="item" data-tab="03">
          03
        </a>
      
        <a class="item" data-tab="04">
          04
        </a>
      
        <a class="item" data-tab="05">
          05
        </a>
      
        <a class="item" data-tab="06">
          06
        </a>
      
        <a class="item" data-tab="07">
          07
        </a>
      
        <a class="item" data-tab="Exercises">
          Exercises
        </a>
      
    </div>
  </div>


  

  <div class="ui pushable">
    <div class="ui inverted labeled icon left inline vertical sidebar menu">
      <br><br>
      
        
          
            <a class="item"
               href="/topic-01-js-client/unit-1/book-3-jquery/index.html">Lab 01a JQuery </a>
          
        
      
        
          
            <a class="item"
               href="/topic-01-js-client/unit-2/book-1-ajax-1/index.html">Lab 01b Github API </a>
          
        
      
        
          
            <a class="item"
               href="/topic-02-introducing-node/unit-1/book-1/index.html">Lab 02a FoureSquare API </a>
          
        
      
        
          
            <a class="item"
               href="/topic-02-introducing-node/unit-1/book-2/index.html">Lab 02b FoureSquare JS </a>
          
        
      
        
          
            <a class="item"
               href="/topic-02-introducing-node/unit-2/book-applications/index.html">Lab 02b Applications </a>
          
        
      
        
          
            <a class="item"
               href="/topic-03-hapi-apps/unit-1-views/book-views/index.html">Lab 03a Views </a>
          
        
      
        
          
            <a class="item"
               href="/topic-03-hapi-apps/unit-2-sessions/book-sessions/index.html">Lab 03b Sessions </a>
          
        
      
        
          
            <a class="item"
               href="/topic-04-mongo-db/unit-1/book-models/index.html">Lab 04a Models I </a>
          
        
      
        
          
            <a class="item"
               href="/topic-04-mongo-db/unit-2/book-1/index.html">Lab-04b Models II </a>
          
        
      
        
          
            <a class="item"
               href="/topic-05-deployment-seeding/unit-0-validation/book-1-validation/index.html">Lab 05a Validation </a>
          
        
      
        
          
            <a class="item"
               href="/topic-05-deployment-seeding/unit-1-deployment/book-2-deployment/index.html">Lab 05b Deployment </a>
          
        
      
        
          
            <a class="item"
               href="/topic-05-deployment-seeding/unit-2-db-seeding/book-seeding/index.html">Lab 05c Seeding </a>
          
        
      
        
          
            <a class="item"
               href="/topic-06-security-and-apis/unit-1-security-introduction/book-1-pgp-gpg/index.html">Lab 06a GPG </a>
          
        
      
        
          
            <a class="item"
               href="/topic-06-security-and-apis/unit-2-api/book-api/index.html">Lab 06b Apis </a>
          
        
      
        
          
            <a class="item"
               href="/topic-07-security-and-tdd/unit-1-security-foundations/book-1-openssl/index.html">Lab 07a OpenSSL and Certificates </a>
          
        
      
        
          
            <a class="item"
               href="/topic-07-security-and-tdd/unit-2-tdd/book-tdd/index.html">Lab 07b Tdd </a>
          
        
      
        
          
            <a class="item"
               href="/topic-08-tls-threats/unit-1-certificates+tls/book-1-tls-configuration/index.html">Lab 08a TLS </a>
          
        
      
        
          
            <a class="item"
               href="/topic-08-tls-threats/unit-2-webapp-threats+vulnerabilities/book-1-misuse-cases/index.html">Lab 08b Threat Modelling </a>
          
        
      
        
          
            <a class="item"
               href="/topic-09-authentication-rest/unit-1-web-app-authentication/book-1-web-authentication/index.html">Lab 09a Authentication techniques </a>
          
        
      
        
          
            <a class="item"
               href="/topic-09-authentication-rest/unit-2-rest/book-rest/index.html">Lab 09b Rest </a>
          
        
      
        
          
            <a class="item"
               href="/topic-10-pen-testing-aurelia-1/unit-1-pentesting/book-1-burp-proxy/index.html">Lab 10a Burp-Proxy </a>
          
        
      
        
          
            <a class="item"
               href="/topic-10-pen-testing-aurelia-1/unit-1-pentesting/book-2-regex/index.html">Lab 10b Regular Expressions </a>
          
        
      
        
          
            <a class="item"
               href="/topic-10-pen-testing-aurelia-1/unit-1-pentesting/book-3-xss/index.html">Lab 10c XSS tips </a>
          
        
      
        
          
            <a class="item"
               href="/topic-10-pen-testing-aurelia-1/unit-2-aurelia-a/book-au-1/index.html">Lab-10d Aurelia Components </a>
          
        
      
        
          
            <a class="item"
               href="/topic-10-pen-testing-aurelia-1/unit-2-aurelia-b/book-au-2/index.html">Lab 10e Aurelia Custom Elements </a>
          
        
      
        
          
            <a class="item"
               href="/topic-11-aurelia-2/unit-0-routers/book-au-3/index.html">Lab 11a Aurelia Router </a>
          
        
      
        
          
            <a class="item"
               href="/topic-11-aurelia-2/unit-1-services/book-au-4/index.html">Lab 11b Aurelia Services </a>
          
        
      
        
          
            <a class="item"
               href="/topic-11-aurelia-2/unit-2-events/book-au-5/index.html">Lab 11c Aurelia Event Aggregator </a>
          
        
      
        
          
            <a class="item"
               href="/topic-11-aurelia-2/unit-3-aurelia-authentication-1/book-au-6/index.html">Lab 11d User Models </a>
          
        
      
        
          
            <a class="item"
               href="/topic-11-aurelia-2/unit-3-aurelia-authentication-1/book-au-7/index.html">Lab 11e donation-client:donation-web </a>
          
        
      
        
          
            <a class="item"
               href="/topic-12-aurelia-3/unit-1/book-a-hapi-auth/index.html">Lab 12a Hapi-JWT </a>
          
        
      
        
          
            <a class="item"
               href="/topic-12-aurelia-3/unit-1/book-b-aurelia-jwt/index.html">Lab-12b Aurelia JWT </a>
          
        
      
        
          
            <a class="item"
               href="/topic-12-aurelia-3/unit-2/book-1-maps/index.html">Lab-12c Map Panel </a>
          
        
      
        
          
            <a class="item"
               href="/topic-12-aurelia-3/unit-2/book-2-maps-2/index.html">Lab-12d Map View </a>
          
        
      
        
          
            <a class="item"
               href="/topic-12-aurelia-3/unit-2/book-3-deployment/index.html">Lab-12e Deployment </a>
          
        
      
    </div>
    <div class="pusher" tabindex="-1">
      <div class="ui basic segment">
        <br>
        
          <div class="ui tab segment lab" data-tab="Lab 05b Deployment">
            <h1>Objectives</h1>
<p>Deploy the application + the mongo database, to an application server.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Solutions">
            <h1>Exercise Solutions</h1>
<h2>Exerise 1: Login Validation</h2>
<p>Incorporate validation into the Login form:</p>
<h2>app/views/login.hbs</h2>
<pre><code>        &lt;/form&gt;
        {{&gt; error }}
      &lt;/div&gt;</code></pre>
<h2>app/controllers/accounts.js</h2>
<pre><code>login: {
    auth: false,
    validate: {
      payload: {
        email: Joi.string()
          .email()
          .required(),
        password: Joi.string().required()
      },
      options: {
        abortEarly: false
      },
      failAction: function(request, h, error) {
        return h
          .view(&#39;login&#39;, {
            title: &#39;Sign in error&#39;,
            errors: error.details
          })
          .takeover()
          .code(400);
      }
    },
    handler: async function(request, h) {
      const { email, password } = request.payload;
      try {
        let user = await User.findByEmail(email);
        if (!user) {
          const message = &#39;Email address is not registered&#39;;
          throw new Boom(message);
        }
        user.comparePassword(password);
        request.cookieAuth.set({ id: user.id });
        return h.redirect(&#39;/home&#39;);
      } catch (err) {
        return h.view(&#39;login&#39;, { errors: [{ message: err.message }] });
      }
    }
  },</code></pre>

          </div>
        
          <div class="ui tab segment lab" data-tab="02">
            <h1>Heroku Node Guide</h1>
<p>Visit heroku and create an account:</p>
<ul>
<li><a href="http://www.heroku.com">http://www.heroku.com</a></li>
</ul>
<p>An installation of git is a prerequisite for working with heroku.</p>
<ul>
<li><a href="https://git-scm.com/">https://git-scm.com/</a></li>
</ul>
<p>You will also need to install the <code>Heroku CommandLine</code> on your worksation:</p>
<ul>
<li><a href="https://toolbelt.heroku.com/">https://toolbelt.heroku.com/</a></li>
</ul>
<p>Make sure these are installed and functioning before proceeding further.</p>
<p>In order to get familiar with the heroku workflow, work through one of the getting started guides:</p>
<ul>
<li><a href="https://devcenter.heroku.com/start">https://devcenter.heroku.com/start</a></li>
</ul>
<p>In particular, the node.js guide:</p>
<ul>
<li><a href="https://devcenter.heroku.com/articles/getting-started-with-nodejs#introduction">https://devcenter.heroku.com/articles/getting-started-with-nodejs#introduction</a></li>
</ul>

          </div>
        
          <div class="ui tab segment lab" data-tab="03">
            <h2>Prepare Application for Deployment</h2>
<p>Before we deploy the application, we need to incorporate a small change to <code>package.json</code>:</p>
<pre><code>    &quot;start&quot;: &quot;node index.js&quot;,</code></pre>
<p>This entry is within the <code>scripts</code> section:</p>
<h2>package.json</h2>
<pre><code>{
  &quot;name&quot;: &quot;donation-web&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;index.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;node index.js&quot;,
    &quot;test&quot;: &quot;echo \&quot;Error: no test specified\&quot; &amp;&amp; exit 1&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;dependencies&quot;: {
    &quot;boom&quot;: &quot;^7.3.0&quot;,
    &quot;dotenv&quot;: &quot;^6.2.0&quot;,
    &quot;handlebars&quot;: &quot;^4.0.12&quot;,
    &quot;hapi&quot;: &quot;^18.0.0&quot;,
    &quot;hapi-auth-cookie&quot;: &quot;^9.1.0&quot;,
    &quot;inert&quot;: &quot;^5.1.2&quot;,
    &quot;joi&quot;: &quot;^14.3.1&quot;,
    &quot;mongoose&quot;: &quot;^5.4.7&quot;,
    &quot;vision&quot;: &quot;^5.4.4&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;prettier&quot;: &quot;^1.16.0&quot;
  },
  &quot;prettier&quot;: {
    &quot;singleQuote&quot;: true,
    &quot;printWidth&quot;: 120
  }
}</code></pre>
<p>We meed another small change - in index, change the way the server is created:</p>
<h2>index.js</h2>
<pre><code>const server = Hapi.server({
  port: process.env.PORT || 3000,
});</code></pre>
<h1>Git</h1>
<p>Heroku will user git to manage the deployment of your application. For the pruposes of this lab, we will do this from a completely separate project. This is not neccessairly the optimal approach, but it is useful in our context.</p>
<p>So, duplicate your project into another folder - perhaps called <code>donation-web-heroku</code>. The rest of this lab will take place in that duplicated verion.</p>
<p>Now (in the copy), do the following:</p>
<ul>
<li>delete the <code>.git</code> folder completely. This will remove all of the git history in the copy</li>
<li>in .gitignore, remove the .env file:</li>
</ul>
<h2>.gitignore</h2>
<pre><code>.idea
node_modules
//.env</code></pre>
<p>Now recreate a git repository in the project:</p>
<pre><code>git init</code></pre>
<p>Check the status is the repository, displaying all files in the project not yet committed to git:</p>
<pre><code>git status -su</code></pre>
<p>This should display this list:</p>
<pre><code>?? .gitignore
?? .jscsrc
?? app/controllers/accounts.js
?? app/controllers/assets.js
?? app/controllers/donations.js
?? app/models/db.js
?? app/models/donation.js
?? app/models/user.js
?? app/views/home.hbs
?? app/views/layout/layout.hbs
?? app/views/login.hbs
?? app/views/main.hbs
?? app/views/partials/donate.hbs
?? app/views/partials/donationlist.hbs
?? app/views/partials/formerror.hbs
?? app/views/partials/mainmenu.hbs
?? app/views/partials/welcomemenu.hbs
?? app/views/report.hbs
?? app/views/settings.hbs
?? app/views/signup.hbs
?? index.js
?? package.json
?? public/images/favicon.png
?? public/images/homer.png
?? public/images/homer2.png
?? public/images/homer3.png
?? public/images/homer4.jpeg
?? public/images/homer5.jpg
?? routes.js</code></pre>
<p>In the above list, <code>??</code> indicates that the file is not yet committed to git. We can all files to git now:</p>
<pre><code>git add .</code></pre>
<p>Check the status again:</p>
<pre><code>$ git status -su
A  .gitignore
A  .jscsrc
A  app/controllers/accounts.js
A  app/controllers/assets.js
A  app/controllers/donations.js
A  app/models/db.js
A  app/models/donation.js
A  app/models/user.js
A  app/views/home.hbs
A  app/views/layout/layout.hbs
A  app/views/login.hbs
A  app/views/main.hbs
A  app/views/partials/donate.hbs
A  app/views/partials/donationlist.hbs
A  app/views/partials/formerror.hbs
A  app/views/partials/mainmenu.hbs
A  app/views/partials/welcomemenu.hbs
A  app/views/report.hbs
A  app/views/settings.hbs
A  app/views/signup.hbs
A  index.js
A  package.json
A  public/images/favicon.png
A  public/images/homer.png
A  public/images/homer2.png
A  public/images/homer3.png
A  public/images/homer4.jpeg
A  public/images/homer5.jpg
A  routes.js</code></pre>
<p>&#39;A&#39; means it has been added to the repo.</p>
<p>We can now commit all of these files:</p>
<pre><code> git commit -m &quot;first commit&quot;</code></pre>
<p>This will respond with this:</p>
<pre><code>[master (root-commit) 12abda7] first commit
 29 files changed, 707 insertions(+)
 create mode 100644 .gitignore
 create mode 100644 .jscsrc
 create mode 100644 app/controllers/accounts.js
 create mode 100644 app/controllers/assets.js
 create mode 100644 app/controllers/donations.js
 create mode 100644 app/models/db.js
 create mode 100644 app/models/donation.js
 create mode 100644 app/models/user.js
 create mode 100644 app/views/home.hbs
 create mode 100644 app/views/layout/layout.hbs
 create mode 100644 app/views/login.hbs
 create mode 100644 app/views/main.hbs
 create mode 100644 app/views/partials/donate.hbs
 create mode 100644 app/views/partials/donationlist.hbs
 create mode 100644 app/views/partials/formerror.hbs
 create mode 100644 app/views/partials/mainmenu.hbs
 create mode 100644 app/views/partials/welcomemenu.hbs
 create mode 100644 app/views/report.hbs
 create mode 100644 app/views/settings.hbs
 create mode 100644 app/views/signup.hbs
 create mode 100644 index.js
 create mode 100644 package.json
 create mode 100644 public/images/favicon.png
 create mode 100644 public/images/homer.png
 create mode 100644 public/images/homer2.png
 create mode 100644 public/images/homer3.png
 create mode 100644 public/images/homer4.jpeg
 create mode 100644 public/images/homer5.jpg
 create mode 100644 routes.js</code></pre>
<p>Check the status again:</p>
<pre><code>git status -su</code></pre>
<p>which should respond with a blank message.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="04">
            <h1>MongoLab</h1>
<p>Create a free account here:</p>
<ul>
<li><a href="https://www.mongodb.com/cloud/atlas">https://www.mongodb.com/cloud/atlas</a></li>
</ul>
<p>Once logged in, make sure to select one of the Free Tiers:</p>
<p><img src="img/01x.png" alt=""></p>
<p>On the same page, select the M0 (free) option:</p>
<p><img src="img/02x.png" alt=""></p>
<p>This will take a few minutes to provision:</p>
<p><img src="img/03x.png" alt=""></p>
<p>Once provisioned, press &quot;Connect&quot;:</p>
<p><img src="img/04x.png" alt=""></p>
<p>Select &quot;Add Your Current IP Address&quot;:</p>
<p><img src="img/05x.png" alt=""></p>
<p>And then create a new MongoDB User. Give the user the username/password &quot;donation&quot;: (be sure to press &quot;Create MongoDB User&quot;)</p>
<p><img src="img/06x.png" alt=""></p>
<p>The press &#39;Close&#39;:</p>
<p><img src="img/07x.png" alt=""></p>
<p>This takes you to the &quot;Clusters&quot; panel:</p>
<p><img src="img/08x.png" alt=""></p>
<p>Here, select &quot;Security&quot;</p>
<p><img src="img/09x.png" alt=""></p>
<p>Press the &quot;Add IP Address&quot;:</p>
<p><img src="img/10x.png" alt=""></p>
<p>And select &#39;Allow Access from Anywhere&#39; and press &quot;Confirm&quot;:</p>
<p><img src="img/11x.png" alt=""></p>
<p>This takes you back to the Security panel:</p>
<p><img src="img/12x.png" alt=""></p>
<p>Go to overview:</p>
<p><img src="img/12xa.png" alt=""></p>
<p>Press &quot;Connect&quot;, and the &quot;Connect your Application&quot;:</p>
<p><img src="img/14x.png" alt=""></p>
<p>Select &quot;Standard Connection String&quot; - and copy the URI connections string offered:</p>
<p><img src="img/16x.png" alt=""></p>
<p>Paste the string into your .env file:</p>
<h1>.env</h1>
<pre><code>...
mongodb://donation:&lt;PASSWORD&gt;@cluster0-shard-00-00-34-344-3tw1r.mongodb.net:234017,cluster0-shard-00-01-3tw1r.mongodb.net:27017,cluster0-shard345-343tw1r.mongodb.net:27017/test?ssl=true&amp;replicaSet=Cluster0-shard-0&amp;authSource=admin&amp;retryWrites=true
...</code></pre>
<p>You will need to make some changes to this string.</p>
<ul>
<li>Insert the password you set for the donation user (it should also be donation) into the slot <code>&lt;PASSWORD&gt;</code></li>
<li>Locate the database name - &quot;test&quot; is the default, and replace with &quot;donation&quot;</li>
<li>put &#39;db=&#39; in front of the string</li>
</ul>
<p>The string might look like this: (this one has been obfuscated a little, yours will be different)</p>
<pre><code>...
db=mongodb://donation:donation@cluster0-shard-0sd-d0-00-3tw1r.mongodb.net:27017,cluster0-shard-00-01-3tw1r.mongodb.net:27017,cluster0-sha-dsd-drd-00-02-3tw1r.mongodb.net:27017/donation?ssl=true&amp;replicaSet=Cluster0-shard-0&amp;authSource=admin&amp;retryWrites=true
...</code></pre>
<p>Restart the app, and see if it launches successfully. As you register users / make donations, observe the database on atlas . You should see the collections being populated on that service:</p>
<p><img src="20x.png" alt=""></p>
<p>If it works, then change it back to what it was, but keep the connection string (as a comment for the moment).</p>
<h2>Update!</h2>
<p>If you are getting a connection error: &#39;no proxies available&#39; error, try the following:</p>
<ul>
<li>exract just the first server:</li>
</ul>
<pre><code>...
db=mongodb://donation:donation@cluster0-shard-0sd-d0-00-3tw1r.mongodb.net:27017
...</code></pre>
<ul>
<li>apppend the database + authentication from the tail of the string:</li>
</ul>
<pre><code>...
/donation?ssl=true&amp;replicaSet=Cluster0-shard-0&amp;authSource=admin&amp;retryWrites=true
...</code></pre>
<ul>
<li>Giving you something like this:</li>
</ul>
<pre><code>...
db=mongodb://donation:donation@cluster0-shard-0sd-d0-00-3tw1r.mongodb.net:27017/donation?ssl=true&amp;replicaSet=Cluster0-shard-0&amp;authSource=admin&amp;retryWrites=true
...</code></pre>

          </div>
        
          <div class="ui tab segment lab" data-tab="05">
            <h1>Heroku</h1>
<p>Verify that the following command responds with a recent version number:</p>
<pre><code>heroku --version</code></pre>
<p>Now log in to your heroku account:</p>
<pre><code>heroku login</code></pre>
<p>This will open a browser to complete the login - and will report back on the command line that you are logged in successfully.</p>
<pre><code>heroku create</code></pre>
<p>This will respond with a new name in a few seconds:</p>
<pre><code>Creating app... â¬¢ calm-brushlands-29225
https://calm-brushlands-29225.herokuapp.com/ | https://git.heroku.com/calm-brushlands-29225.git</code></pre>
<p>The two urls reported are the domain to access the app on (you will need this in a moment), and also the remote git repository where the source of your app pulled from during deployment.</p>
<p>On the web, you can check to see if the app is present on your dashboard:</p>
<ul>
<li><a href="https://dashboard.heroku.com/apps">https://dashboard.heroku.com/apps</a></li>
</ul>
<p>Explore the dashboard for the app for a few minutes. We havent deployed it yet however.</p>

          </div>
        
          <div class="ui tab segment lab" data-tab="06">
            <h2>Deploy</h2>
<p>We can now deploy the app:</p>
<pre><code>git push heroku master</code></pre>
<p>This will report details on the deployment:</p>
<pre><code>Counting objects: 240, done.
Delta compression using up to 4 threads.
Compressing objects: 100% (224/224), done.
Writing objects: 100% (240/240), 528.80 KiB | 15.55 MiB/s, done.
Total 240 (delta 106), reused 0 (delta 0)
remote: Compressing source files... done.
remote: Building source:
remote:
remote: -----&gt; Node.js app detected
remote:
remote: -----&gt; Creating runtime environment
remote:
remote:        NPM_CONFIG_LOGLEVEL=error
remote:        NODE_ENV=production
remote:        NODE_MODULES_CACHE=true
remote:        NODE_VERBOSE=false
remote:
remote: -----&gt; Installing binaries
remote:        engines.node (package.json):  unspecified
remote:        engines.npm (package.json):   unspecified (use default)
remote:
remote:        Resolving node version 10.x...
remote:        Downloading and installing node 10.15.1...
remote:        Using default npm version: 6.4.1
remote:
remote: -----&gt; Building dependencies
remote:        Installing node modules (package.json + package-lock)
remote:        added 74 packages from 63 contributors and audited 222 packages in 4.241s
remote:        found 0 vulnerabilities
remote:
remote:
remote: -----&gt; Caching build
remote:        - node_modules
remote:
remote: -----&gt; Pruning devDependencies
remote:        removed 1 package and audited 221 packages in 1.125s
remote:        found 0 vulnerabilities
remote:
remote:
remote: -----&gt; Build succeeded!
remote:  !     This app may not specify any way to start a node process
remote:        https://devcenter.heroku.com/articles/nodejs-support#default-web-process-type
remote:
remote: -----&gt; Discovering process types
remote:        Procfile declares types     -&gt; (none)
remote:        Default types for buildpack -&gt; web
remote:
remote: -----&gt; Compressing...
remote:        Done: 21.1M
remote: -----&gt; Launching...
remote:        Released v3
remote:        https://serene-brushlands-60288.herokuapp.com/ deployed to Heroku
remote:
remote: Verifying deploy... done.
To https://git.heroku.com/serene-brushlands-60288.git
 * [new branch]      master -&gt; master</code></pre>
<p>Visit the url for the app as reported on the last line, or alternatively just enter the following command:</p>
<pre><code>heroku open</code></pre>
<p>In a separate termainal, from the <code>donation-web-heroku</code> folder, run the logs command:</p>
<pre><code>heroku logs --tail</code></pre>
<p>As you interact with the app, you should see events:</p>
<pre><code>2019-02-05T17:09:16.563323+00:00 heroku[router]: at=info method=GET path=&quot;/images/homer3.png&quot; host=intense-ravine-98431.herokuapp.com request_id=824bcb9d-3540-4fee-84c1-bb18f334d9f5 fwd=&quot;86.44.40.94&quot; dyno=web.1 connect=0ms service=8ms status=200 bytes=63849 protocol=https
2019-02-05T17:09:18.535939+00:00 heroku[router]: at=info method=GET path=&quot;/logout&quot; host=intense-ravine-98431.herokuapp.com request_id=b5300470-e3e2-4676-943a-04dbcc5a1366 fwd=&quot;86.44.40.94&quot; dyno=web.1 connect=0ms service=8ms status=302 bytes=287 protocol=https
2019-02-05T17:09:18.656533+00:00 heroku[router]: at=info method=GET path=&quot;/&quot; host=intense-ravine-98431.herokuapp.com request_id=88f558e4-5feb-4fd1-a343-b76e4265fa69 fwd=&quot;86.44.40.94&quot; dyno=web.1 connect=0ms service=21ms status=200 bytes=855 protocol=https
2019-02-05T17:09:18.772422+00:00 heroku[router]: at=info method=GET path=&quot;/images/homer.png&quot; host=intense-ravine-98431.herokuapp.com request_id=f3e9e426-4e09-4eee-8409-f45db2b40441 fwd=&quot;86.44.40.94&quot; dyno=web.1 connect=0ms service=5ms status=304 bytes=231 protocol=https</code></pre>

          </div>
        
          <div class="ui tab segment lab" data-tab="07">
            <h1>Connecting Robomongo to the MongoLab (heroku) database</h1>
<p>The database we are now using is Mongo Atlas - and it might be useful to be able to browse directly to it.</p>
<p>First, locate the Cluster page on Atlas for your database:</p>
<p><img src="img/21x.png" alt=""></p>
<p>Click on &#39;Cluster0&#39; to get a view showing the primary cluster:</p>
<p><img src="img/22x.png" alt=""></p>
<p>Click on the primary cluster:</p>
<p><img src="img/26x.png" alt=""></p>
<p>Copy the url - without the port number. This would be:</p>
<pre><code>cluster0-shard-00-00-ul6cz.azure.mongodb.net</code></pre>
<p>in the above.</p>
<p>Create a new connection in Robo 3T,  and paste the address into the Address Field:</p>
<p><img src="img/23x.png" alt=""></p>
<p>On the authentication tab, enter the username/password (may be donation/donation):</p>
<p><img src="img/24x.png" alt=""></p>
<p>Finally, on SSL, set as shown below:</p>
<p><img src="img/25x.png" alt=""></p>
<p>Save the connection - and you should be able to connect.</p>
<p><img src="img/27x.png" alt=""></p>

          </div>
        
          <div class="ui tab segment lab" data-tab="Exercises">
            <h1>Exercises</h1>
<p>Archive of the project so far:</p>
<ul>
<li><a href="https://github.com/wit-hdip-comp-sci-2018/donation-web/releases/tag/donation.07.end">https://github.com/wit-hdip-comp-sci-2018/donation-web/releases/tag/donation.07.end</a></li>
</ul>
<h2>Exercise 1: Glitch</h2>
<p>Deploy the application to the Glitch service.</p>

          </div>
        
      </div>
    </div>
  </div>


  <br>
  <script>
    $(document).on('keydown', function(e) {
  e = e || window.event;
  var nextTab;
  switch (e.which || e.keyCode) {
    case 37: // left
      nextTab = $('.tab-menu a[data-tab].active').prev('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').last();
      nextTab.click();
      $('.pusher').focus();
      break;

    case 39: // right
      nextTab = $('.tab-menu a[data-tab].active').next('a[data-tab]');
      if (!nextTab.length) nextTab = $('.tab-menu a[data-tab]').first();
      nextTab.click();
      $('.pusher').focus();
      break;
  }
});

    $(document).ready(function() {
  $('img').addClass('ui image');

  $('.ui.embed').embed();

  const $images = $('.lab img');
  jQuery.each($images, function(i) {
    if ($images[i].alt.length > 0) {
      const divImg = $(document.createElement('div')).addClass(
        'ui basic segment',
      );
      $($images[i]).wrap(divImg);
      const divLabel = $(document.createElement('div')).addClass(
        'ui blue ribbon label',
      );
      divLabel.append($images[i].alt);
      $(divLabel).insertBefore($images[i]);
    }
  });

  $('.ui.menu .item').tab({
    history: true,
    historyType: 'hash',
  });

  $('.popup').popup();

  $('.ui.sidebar')
    .sidebar({ context: $('.pushable') })
    .sidebar('setting', 'transition', 'slide out')
    .sidebar('attach events', '#toc');
});

  </script>



  <div class="ui bottom fixed borderless right menu">
    <div class="ui right small menu">
      <div class="ui tiny basic message segment">
         Powered by <a href="https://github.com/edeleastar/tutors-ts">tutors-ts.</a> Unless otherwise stated, this work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a>.
      </div>
    </div>
  </div>

  </body>

</html>